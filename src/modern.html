<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <title>Shikai - Modern Greeter</title>
  <link rel="icon" type="image/x-icon" href="./assets/media/icon.png">
  <meta name="viewport"
    content="width=device-width, viewport-fit=cover, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta charset="utf-8">
  <meta name="description" content="Modern Linux display manager greeter theme">
  <meta name="theme-color" content="#0a0a0a">

  <!-- Preload fonts for better performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <script>
    window.__is_debug = true;
    if (window.__is_debug) {
      lightdm = {
        lock_hint: false,
        can_shutdown: true,
        can_restart: true,
        can_suspend: true,
        can_hibernate: true,
        select_user_hint: undefined,
        is_authenticated: false,
        users: [
          {
            username: "user",
            display_name: "John Doe",
            session: "plasma",
            image: ""
          },
          {
            username: "admin",
            display_name: "Administrator",
            session: "gnome",
            image: ""
          }
        ],
        sessions: [
          { name: "Plasma (Wayland)", key: "plasmawayland", type: "wayland" },
          { name: "GNOME", key: "gnome", type: "wayland" },
          { name: "KDE Plasma", key: "plasma", type: "x11" },
          { name: "i3", key: "i3", type: "x11" },
          { name: "Hyprland", key: "hyprland", type: "wayland" }
        ],
        default_session: "plasma",
        hostname: "archlinux",
        authenticate: (username) => {
          console.log("Authenticating:", username);
        },
        cancel_authentication: () => {
          console.log("Authentication cancelled");
        },
        respond: (_password) => {
          console.log("Password response received");
        },
        start_session: (session) => {
          console.log("Starting session:", session);
        },
        shutdown: () => {
          console.log("Shutdown requested");
        },
        restart: () => {
          console.log("Restart requested");
        },
        suspend: () => {
          console.log("Suspend requested");
        },
        hibernate: () => {
          console.log("Hibernate requested");
        },
        show_prompt: {
          connect: (callback) => {
            this._callback = callback;
          },
          disconnect: () => {
            this._callback = null;
          }
        }
      };
      greeter_comm = {
        broadcast: (data) => {
          console.log("Broadcasting:", data);
        }
      };
      greeter_config = {
        branding: {
          background_images_dir: "/usr/share/backgrounds",
          logo_image: "",
          user_image: ""
        },
        greeter: {
          default_user: null,
          default_session: "plasma"
        }
      };
    }
  </script>

  <style>
    /* Critical CSS for fast initial render */
    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background-color: #0a0a0a;
      color: #fafafa;
      font-family: "Inter", system-ui, sans-serif;
    }

    body {
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    #root {
      width: 100%;
      height: 100%;
      position: relative;
    }

    /* Initial loading state */
    .loading-spinner {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-top-color: #3b82f6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: translate(-50%, -50%) rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <!-- Notification container -->
  <div id="notificationroot" class="fixed top-4 right-4 z-[100] flex flex-col gap-2"></div>

  <!-- Main React root -->
  <div id="root">
    <div class="loading-spinner"></div>
  </div>

  <!-- Main script -->
  <script type="module" src="./js/modern.tsx"></script>
</body>

</html>
